"use strict";/*jshint smarttabs:true*/
/*jshint expr:true */
var ekap={appTexts:{searchIntroText:"Du har søgt på - "},init:function(){this.bindUIActions()},bindUIActions:function(){
//Sets the buttons id to a hidden field value for serverside use
$(document).on("click","[data-contribution-title]",function(){ekap.setModalHeader(this)}),
//Toggle the search section"click"
$(document).on("click",".js-toggle-search-section",function(){ekap.toggleSearch()}),
//Show/hide the amount limits
$(document).on("change","[data-amount-limit-section-id]",function(){ekap.toggleAmountLimits(this)})},setModalHeader:function(a){var b=$(a),c=b.attr("data-contribution-title");$(".js-modal-title").html(c)},
//Show/hide the amount limits based on the select values (the corresponding form items must have the same index as the select)
toggleAmountLimits:function(a){var b=$(a),c=$("[data-amount-limit-section = "+b.attr("data-amount-limit-section-id")+"]");
//Absolute hide all the form sections (normal bootstrap "hidden" class is not used as this is controlled by the collapsable header)
$(".skts-process-form-section",c).addClass("skts-hide"),
//Disable all the hidden fields
$("input",c).prop("disabled",!0),
//If there is a selected value
null!==b.val()?(
//If an option is selected
$("option",b).each(function(a,b){$(b).prop("selected")&&(
//Enable the item for show/hide
$(".skts-process-form-section",c).eq(a).removeClass("skts-hide"),
//Enable the form elements
$("input",c).eq(a).prop("disabled",!1))}),
//Show the collapsable section
c.removeClass("hidden")):
//Hide the entire collapseable section
c.addClass("hidden")},
//Show/hide the search section
toggleSearch:function(){var a=$(".js-search-section"),//The search section to toggle
b=$(".js-search-critera"),//The search criteria placeholder
c=ekap.appTexts.searchIntroText;//The search criteria text (set to a default text)
//Loop through all the select and checkbox items in the search section
$("select, input[type='checkbox'], input[type='text'][class*=form-control]",a).each(function(a,b){var d=$(b),//The form element
e="",//The label of each form element
f=$("option:selected",d),//The selected options in each select
g=d.is(":checked"),//The checked checkboxes
h="",//The selected values of each form element
i="&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;";
//If the checkbox is checked
if(
//Loop through all the selected options in each select
f.each(function(a,b){var c=$(b);if(""!==c.val()){var d=f.length-1===a?i:", ";//Set the value divider (if not the final value)
//Set the label for the selected options
e=$("label[for='"+c.parent().attr("id")+"']").text(),
//Add each selected option text and value divider
h+=c.text()+d}}),g){var j=$("label[for='"+d.attr("id")+"']");
//If label is not surrounding the input (uses the "for" attribute)
//Set the label for the checkbox
e=j.length>0?$.trim($("label[for='"+d.attr("id")+"']").text())+i:$.trim(d.parent().text())+i}
//If there are selected labels
if(
//If the a text field is filled out
"text"===$(b).prop("type")&&""!==$.trim(d.val())&&(
//Set the label for the text field 
e=$.trim($("label[for='"+d.attr("id")+"']").text()),
//Set the value for the text field
h=d.val()+i),""!==e){var k=": ";
//If the element is a checkbox, don't set the propertySeperator (as there are no selectedValues)
g&&(k=""),
//Set the search criteria 
console.log(),c+="<strong>"+$.trim(e)+k+"</strong> "+h}}),
//If the search criteria has been altered from the default text
c!==ekap.appTexts.searchIntroText&&
//Write the search criteria text to the search criteria placeholder
b.html(c),
//Toggle the search criteria placeholder
//$searchCriteriaPlaceholder.slideToggle("fast");
//Toggle the search section
a.slideToggle("fast")}};$(document).ready(function(){ekap.init()});